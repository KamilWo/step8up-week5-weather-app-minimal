document.addEventListener("DOMContentLoaded",()=>{let e=document.getElementById("api-key-input"),t=document.getElementById("location-input"),r=document.getElementById("get-weather-btn"),a=document.getElementById("weather-result"),n=document.getElementById("current-weather-city"),o=document.getElementById("current-weather-icon"),i=document.getElementById("current-weather-temp"),d=document.getElementById("current-weather-condition"),s=document.getElementById("current-weather-feels"),c=document.getElementById("current-weather-wind"),l=document.getElementById("error-message"),u=document.getElementById("loading"),m=document.getElementById("avatar-menu-btn"),h=document.getElementById("api-key-submenu"),p=document.getElementById("forecast-section"),g=document.getElementById("forecast-carousel-inner"),y=document.getElementById("carousel-indicators");e.value=localStorage.getItem("OpenWeatherApiKey")||"";let E=e.value.trim()||"YOUR_API_KEY_HERE";m.addEventListener("click",()=>{h.classList.toggle("hidden")}),document.addEventListener("click",e=>{m.contains(e.target)||h.contains(e.target)||h.classList.add("hidden")});let w=(e,t,r=!1)=>{v(),e.textContent=t,e.classList.remove("hidden"),r?(e.classList.add("error-message"),e.classList.remove("weather-display")):e.classList.remove("error-message")},v=()=>{a.classList.add("hidden"),l.classList.add("hidden"),u.classList.add("hidden"),p.classList.add("hidden")},L=async e=>{let t=`https://api.openweathermap.org/geo/1.0/direct?q=${encodeURIComponent(e)}&limit=1&appid=${E}`;try{let e=await fetch(t);if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);let r=await e.json();if(r.length>0)return{lat:r[0].lat,lon:r[0].lon,name:r[0].name,country:r[0].country};throw Error("City not found.")}catch(e){throw console.error("Error fetching coordinates:",e),Error(`Could not retrieve coordinates: ${e.message}`)}},f=async(e,t,r="metric")=>{let a=`https://api.openweathermap.org/data/2.5/weather?lat=${e}&lon=${t}&units=${r}&appid=${E}`;try{let e=await fetch(a);if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(e){throw console.error("Error fetching current weather data:",e),Error(`Could not retrieve current weather data: ${e.message}`)}},$=async(e,t,r="metric")=>{let a=`https://api.openweathermap.org/data/2.5/forecast?lat=${e}&lon=${t}&units=${r}&appid=${E}`;try{let e=await fetch(a);if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(e){throw console.error("Error fetching forecast data:",e),Error(`Could not retrieve forecast data: ${e.message}`)}},x=0,I=0,b=e=>{let t=document.querySelectorAll("[data-carousel-item]"),r=document.querySelectorAll("#carousel-indicators button");t.forEach(e=>{e.classList.add("hidden"),e.classList.remove("active")}),r.forEach(e=>{e.removeAttribute("aria-current")}),t[e]&&(t[e].classList.remove("hidden"),t[e].classList.add("active")),r[e]&&r[e].setAttribute("aria-current","true")},k=()=>{b(x=(x+1)%I)},B=()=>{b(x=(x-1+I)%I)};r.addEventListener("click",async()=>{let e=t.value.trim();if(!e)return void w(l,"Please enter a location.",!0);if(!E||"YOUR_API_KEY_HERE"===E)return void w(l,"Please enter a valid OpenWeatherMap API Key in the menu.",!0);w(u,"",!1);try{let t=await L(e),r=await f(t.lat,t.lon),l=await $(t.lat,t.lon);v(),((e,t,r)=>{a.classList.remove("hidden"),n.textContent=`${t}, ${r}`,i.textContent=`${Math.round(e.main.temp)}\xb0C`,d.textContent=e.weather[0].description,s.textContent=`Feels like: ${Math.round(e.main.feels_like)}\xb0C`,c.textContent=`Wind: ${Math.round(3.6*e.wind.speed)} km/h`,o.src=`https://openweathermap.org/img/wn/${e.weather[0].icon}@2x.png`,o.alt=e.weather[0].description})(r,t.name,t.country),((e,t)=>{p.classList.remove("hidden"),g.innerHTML="",y.innerHTML="";let r={};e.list.forEach(e=>{let t=new Date(1e3*e.dt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"});r[t]||(r[t]=[]),r[t].push(e)});let a=0;for(let e in I=Object.keys(r).length,x=0,r){let n=document.createElement("div");n.classList.add("hidden","duration-700","ease-in-out"),n.setAttribute("data-carousel-item",""),0===a&&(n.classList.remove("hidden"),n.classList.add("active"));let o=document.createElement("div");o.classList.add("forecast-hourly-container","flex","flex-nowrap","overflow-x-auto","gap-4","p-2"),r[e].sort((e,t)=>e.dt-t.dt),r[e].forEach(e=>{let t=new Date(1e3*e.dt).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1}),r=`https://openweathermap.org/img/wn/${e.weather[0].icon}@2x.png`,a=`
          <div class="forecast-hour-card">
            <h3>${t}</h3>
            <img src="${r}" alt="${e.weather[0].description}" class="weather-icon">
            <p class="capitalize">${e.weather[0].description}</p>
            <p>Temp: ${Math.round(e.main.temp)}\xb0C</p>
            <p>Wind: ${Math.round(3.6*e.wind.speed)} km/h</p>
          </div>
        `;o.insertAdjacentHTML("beforeend",a)}),n.innerHTML=`
        <div class="text-center mb-4">
          <h2 class="text-2xl font-bold text-gray-800">${t}</h2>
          <h3 class="text-xl font-semibold text-blue-600">${e}</h3>
        </div>
      `,n.appendChild(o),g.appendChild(n);let i=document.createElement("button");i.type="button",i.classList.add("w-3","h-3","rounded-full"),0===a&&i.setAttribute("aria-current","true"),i.setAttribute("aria-label",`Slide ${a+1}`),i.setAttribute("data-carousel-slide-to",a.toString()),i.addEventListener("click",()=>{b(x=a)}),y.appendChild(i),a++}let n=document.querySelector("[data-carousel-prev]"),o=document.querySelector("[data-carousel-next]");n.replaceWith(n.cloneNode(!0)),o.replaceWith(o.cloneNode(!0)),document.querySelector("[data-carousel-prev]").addEventListener("click",B),document.querySelector("[data-carousel-next]").addEventListener("click",k)})(l,t.name)}catch(e){w(l,`Error: ${e.message}. Please ensure your API key is correct and the location exists.`,!0)}}),e.addEventListener("input",()=>{localStorage.setItem("OpenWeatherApiKey",e.value.trim()),E=e.value.trim()}),t.addEventListener("keypress",e=>{"Enter"===e.key&&r.click()})});
//# sourceMappingURL=step8up-week5-weather-app-minimal.5cb2fe59.js.map
