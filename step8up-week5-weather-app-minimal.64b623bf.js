document.addEventListener("DOMContentLoaded",()=>{let e=document.getElementById("api-key-input");""===e.value.trim()&&(e.value=localStorage.getItem("OpenWeatherApiKey")||"");let t=e.value.trim()||"YOUR_API_KEY_HERE",a=document.getElementById("location-input"),r=document.getElementById("get-weather-btn"),s=document.getElementById("weather-result"),n=document.getElementById("error-message"),o=document.getElementById("loading");showMessage=(e,t,a=!1)=>{hideAllMessages(),e.textContent=t,e.classList.remove("hidden"),a?e.classList.add("error-message"):e.classList.remove("error-message"),e.classList.remove("weather-display")},hideAllMessages=()=>{s.classList.add("hidden"),n.classList.add("hidden"),o.classList.add("hidden")},getCoordinates=async e=>{let a=`https://api.openweathermap.org/geo/1.0/direct?q=${encodeURIComponent(e)}&limit=1&appid=${t}`;try{let e=await fetch(a);if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);let t=await e.json();if(t.length>0)return{lat:t[0].lat,lon:t[0].lon,name:t[0].name,country:t[0].country}}catch(e){throw console.error("Error fetching coordinates:",e),Error(`Could not retrieve coordinates: ${e.message}`)}},getCurrentWeather=async(e,a,r="metric")=>{let s=`https://api.openweathermap.org/data/2.5/weather?lat=${e}&lon=${a}&units=${r}&appid=${t}`;try{let e=await fetch(s);if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(e){throw console.error("Error fetching weather data:",e),Error(`Could not retrieve weather data: ${e.message}`)}},displayWeather=(e,t,a)=>{hideAllMessages(),s.classList.remove("hidden");let r=e.name,n=e.main.temp,o=e.weather[0].description;s.innerHTML=`
              <h2 class="text-blue-700">${r}, ${a}</h2>
              <p>Temperature: <span class="font-bold">${n}\xb0C</span></p>
              <p>Condition: <span class="capitalize">${o}</span></p>
          `},r.addEventListener("click",async()=>{let e=a.value.trim();if(!e)return void showMessage(n,"Please enter a location.",!0);showMessage(o,"",!1);try{let t=await getCoordinates(e),a=await getCurrentWeather(t.lat,t.lon);displayWeather(a,t.name,t.country)}catch(e){showMessage(n,`Error: ${e.message}. Please ensure your API key is correct and the location exists.`,!0)}}),e.addEventListener("input",()=>{localStorage.setItem("OpenWeatherApiKey",e.value.trim()),t=e.value.trim()||"YOUR_API_KEY_HERE"}),a.addEventListener("keypress",e=>{"Enter"===e.key&&r.click()})});
//# sourceMappingURL=step8up-week5-weather-app-minimal.64b623bf.js.map
