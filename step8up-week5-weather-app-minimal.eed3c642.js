document.addEventListener("DOMContentLoaded",()=>{let e=document.getElementById("api-key-input"),t=document.getElementById("api-key-submenu"),n=document.getElementById("user-menu-btn"),r=document.getElementById("carousel-indicators"),a=document.getElementById("current-weather-city"),o=document.getElementById("current-weather-condition"),i=document.getElementById("current-weather-feels"),s=document.getElementById("current-weather-icon"),d=document.getElementById("current-weather-temp"),l=document.getElementById("current-weather-wind"),c=document.getElementById("error-message"),u=document.getElementById("forecast-carousel-inner"),m=document.getElementById("forecast-section"),h=document.getElementById("get-weather-btn"),p=document.getElementById("loading"),g=document.getElementById("location-input"),w=document.getElementById("weather-result");e.value=localStorage.getItem("OpenWeatherApiKey")||"";let y=e.value.trim()||"YOUR_API_KEY_HERE";n.addEventListener("click",()=>{t.classList.toggle("hidden")}),document.addEventListener("click",e=>{n.contains(e.target)||t.contains(e.target)||t.classList.add("hidden")});let E=(e,t,n=!1)=>{f(),e.textContent=t,e.classList.remove("hidden"),n?(e.classList.add("error-message"),e.classList.remove("weather-display")):e.classList.remove("error-message")},f=()=>{w.classList.add("hidden"),c.classList.add("hidden"),p.classList.add("hidden"),m.classList.add("hidden")},$=async e=>{let t=`https://api.openweathermap.org/geo/1.0/direct?q=${encodeURIComponent(e)}&limit=1&appid=${y}`;try{let e=await fetch(t);if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);let n=await e.json();if(n.length>0)return{lat:n[0].lat,lon:n[0].lon,name:n[0].name,country:n[0].country};throw Error("City not found.")}catch(e){throw console.error("Error fetching coordinates:",e),Error(`Could not retrieve coordinates: ${e.message}`)}},v=async(e,t,n="metric")=>{let r=`https://api.openweathermap.org/data/2.5/weather?lat=${e}&lon=${t}&units=${n}&appid=${y}`;try{let e=await fetch(r);if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(e){throw console.error("Error fetching current weather data:",e),Error(`Could not retrieve current weather data: ${e.message}`)}},L=async(e,t,n="metric")=>{let r=`https://api.openweathermap.org/data/2.5/forecast?lat=${e}&lon=${t}&units=${n}&appid=${y}`;try{let e=await fetch(r);if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(e){throw console.error("Error fetching forecast data:",e),Error(`Could not retrieve forecast data: ${e.message}`)}};h.addEventListener("click",async()=>{let e=g.value.trim();if(!e)return void E(c,"Please enter chosen location.",!0);if(!y||"YOUR_API_KEY_HERE"===y)return void E(c,"Please enter a valid OpenWeatherMap API Key in the top user menu.",!0);E(p,"",!1);try{let t=await $(e),n=await v(t.lat,t.lon),c=await L(t.lat,t.lon);f(),((e,t,n)=>{w.classList.remove("hidden"),a.textContent=`${t}, ${n}`,d.textContent=`${Math.round(e.main.temp)}\xb0C`,o.textContent=e.weather[0].description,i.textContent=`Feels like: ${Math.round(e.main.feels_like)}\xb0C`,l.textContent=`Wind: ${Math.round(3.6*e.wind.speed)} km/h`,s.src=`https://openweathermap.org/img/wn/${e.weather[0].icon}@2x.png`,s.alt=e.weather[0].description})(n,t.name,t.country),((e,t)=>{m.classList.remove("hidden"),u.innerHTML="",r.innerHTML="";let n={};e.list.forEach(e=>{let t=new Date(1e3*e.dt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"});n[t]||(n[t]=[]),n[t].push(e)});let a=0;for(let e in n){let o=document.createElement("div");o.classList.add("hidden","duration-700","ease-in-out"),o.setAttribute("data-carousel-item",""),0===a&&o.classList.remove("hidden");let i=document.createElement("div");i.classList.add("forecast-hourly-container","flex","flex-nowrap","overflow-x-auto","justify-center","gap-4","p-2"),n[e].sort((e,t)=>e.dt-t.dt),n[e].forEach(e=>{let t=new Date(1e3*e.dt).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1}),n=`https://openweathermap.org/img/wn/${e.weather[0].icon}@2x.png`,r=`
          <div class="forecast-hour-card">
            <h3>${t}</h3>
            <img src="${n}" alt="${e.weather[0].description}" class="weather-icon">
            <p class="capitalize">${e.weather[0].description}</p>
            <p>Temp: ${Math.round(e.main.temp)}\xb0C</p>
            <p>Wind: ${Math.round(3.6*e.wind.speed)} km/h</p>
          </div>
        `;i.insertAdjacentHTML("beforeend",r)}),o.innerHTML=`
        <div class="text-center mb-4">
          <h2 class="text-2xl font-bold text-gray-800">${t}</h2>
          <h3 class="text-xl font-semibold text-blue-600">${e}</h3>
        </div>
      `,o.appendChild(i),u.appendChild(o);let s=document.createElement("button");s.type="button",s.classList.add("w-3","h-3","rounded-full"),0===a&&s.setAttribute("aria-current","true"),s.setAttribute("aria-label",`Slide ${a+1}`),s.setAttribute("data-carousel-slide-to",a.toString()),r.appendChild(s),a++}"function"==typeof initFlowbite?initFlowbite():console.warn("initFlowbite() not found. Carousel indicators might not function correctly if Flowbite is not re-initialized.")})(c,t.name)}catch(e){E(c,`Error: ${e.message}. Please ensure your API key is correct and the location exists.`,!0)}}),e.addEventListener("input",()=>{localStorage.setItem("OpenWeatherApiKey",e.value.trim()),y=e.value.trim()}),g.addEventListener("keypress",e=>{"Enter"===e.key&&h.click()})});
//# sourceMappingURL=step8up-week5-weather-app-minimal.eed3c642.js.map
